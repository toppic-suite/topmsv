<html>
<head>
<title>Proteoform</title>
<link rel="stylesheet" type="text/css" href="../node_modules/datatables.net-dt/css/jquery.dataTables.css">
<link rel="stylesheet" type="text/css" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css"
                       href="../common/topmsv_nav_bar/css/topmsv_nav_bar.css"/>
<link rel="stylesheet" type="text/css" href="css/prsm.css">

<script src="../node_modules/jquery/dist/jquery.js"></script>
<script src="../node_modules/datatables.net/js/jquery.dataTables.js"></script>
<script src="../common/topmsv_nav_bar/js/topmsv_nav_bar.js"></script>
<script src="js/proteoform/proteoform.js"></script>
<script>
/**
 * This function waits till all the HTML tags are loaded.
 * Loads realted protoform based on the proteoform id
 */
$(document).ready(function(){
	// Get the URL from browser
	let x = location.href;
	let l_split = x.split("?")[1];
	let pathAndVal = l_split.split("&");
	let folderpath = pathAndVal[0].split("=")[1];
	// get the proteoform Id number by splitting url with "?" and "="
	let proteoform_id = pathAndVal[1].split("=")[1];
	var head= document.getElementsByTagName('head')[0];
	var script= document.createElement('script');
	// get the proteoform Id number by splitting url with ? and = 
	var file_name = "../data/"+folderpath+ "/proteoforms/proteoform" + proteoform_id+".js";
	script.type= 'text/javascript';
	script.src= file_name;
	// include the proteoform data_file  
	head.appendChild(script);
	// Wait till the proteoform data file is loaded
	script.onload = function () {
		// Function call to generate url to navigate to protein page and all proteins page
		proteoformUrl(folderpath);
		// Function call that generates table of content with prsm and navigation link to prsm
		createTableData(folderpath);
	}
})
</script>
</head>
<body>
<div id="nav-bar"></div>
<div class="container bodycontainer">
<p style="font-size:15px;">
<a id="allprotein_url_start" href="proteins.html">All proteins</a> /
	  <a id = "protein_url_start" href="#"></a>
</p>
<h2 id = "proteoform_header"></h2>
<p id = "prsm_count" style="font-size:16px;"></p>
<table id = "proteoform_data" class="table table-hover table-bordered table-striped table-nonfluid">
	<tr>
		<th>Scan</th><th>Protein</th><th>E-value</th><th># all peaks</th><th># matched peaks</th><th># matched fragment ions</th><th>Link</th>
	</tr>
</table>
<p style="font-size:15px;">
<a id="allprotein_url_end" href="proteins.html">All proteins</a> /
		<a id = "protein_url_end" href="#"></a>
</p>
</div>
<footer class="page-footer font-small blue">
	<div class="footer-copyright text-center py-3">Â© 2019 Copyright: The Trustees of 
		<a href="https://www.iu.edu/" target="#">Indiana University</a>
	</div>
</footer>
</body>
</html>
